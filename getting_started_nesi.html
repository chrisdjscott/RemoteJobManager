<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Getting started on NeSI &#8212; RemoteJobManager 0.15.5.dev3+gcd3f607 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=c058f7c8" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=2950e10d"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command line interface" href="command_line_interface.html" />
    <link rel="prev" title="Welcome to RemoteJobManager&#39;s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="getting-started-on-nesi">
<h1>Getting started on NeSI<a class="headerlink" href="#getting-started-on-nesi" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#install-rjm" id="id1">Install RJM</a></p></li>
<li><p><a class="reference internal" href="#prerequisites-for-running-the-setup-script" id="id2">Prerequisites for running the setup script</a></p>
<ul>
<li><p><a class="reference internal" href="#linking-globus-and-nesi-accounts" id="id3">Linking Globus and NeSI accounts</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#run-the-nesi-setup-script-once-per-machine" id="id4">Run the NeSI setup script (once per machine)</a></p></li>
<li><p><a class="reference internal" href="#run-a-simple-test" id="id5">Run a simple test</a></p>
<ul>
<li><p><a class="reference internal" href="#health-check-script" id="id6">Health check script</a></p></li>
<li><p><a class="reference internal" href="#example-simulation" id="id7">Example simulation</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="install-rjm">
<h2>Install RJM<a class="headerlink" href="#install-rjm" title="Link to this heading">¶</a></h2>
<p>On Windows you could download the executables from the latest release
on the <a class="reference external" href="https://github.com/chrisdjscott/RemoteJobManager/releases">GitHub repository</a>.</p>
<p>Otherwise, install the <em>rjm</em> python package, for example using a virtual
environment and installing the <em>main</em> branch from the git repo:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/chrisdjscott/RemoteJobManager
</pre></div>
</div>
</section>
<section id="prerequisites-for-running-the-setup-script">
<h2>Prerequisites for running the setup script<a class="headerlink" href="#prerequisites-for-running-the-setup-script" title="Link to this heading">¶</a></h2>
<p>In order to proceed with the setup you will need the following:</p>
<ul class="simple">
<li><p>NeSI credentials (username, first and second factor passwords)</p></li>
<li><p>NeSI project code that you belong to (e.g. uoa00106)</p></li>
<li><p>Globus account (<a class="reference external" href="https://app.globus.org/">https://app.globus.org/</a>)</p>
<ul>
<li><p>You can usually sign up with your institutional credentials (e.g.
University of Auckland) for convenience but it is not essential</p></li>
</ul>
</li>
</ul>
<p><strong>Note:</strong> during the setup you may be asked to authenticate multiple times and
in some cases a browser window may be opened automatically for you to
authenticate in and in other cases you may need to copy a link to a browser
manually and authenticate there. Please follow the instructions that show up
when running the setup script.</p>
<section id="linking-globus-and-nesi-accounts">
<h3>Linking Globus and NeSI accounts<a class="headerlink" href="#linking-globus-and-nesi-accounts" title="Link to this heading">¶</a></h3>
<p>You may be asked for a linked identity with the <em>NeSI Wellington OIDC Server</em>.
If you already have a linked identity it should appear in the list like
<em>&lt;username&gt;&#64;wlg-dtn-oidc.nesi.org.nz</em> (where <em>&lt;username&gt;</em> is your NeSI username).
Otherwise, you can follow the instructions to <em>Link an identity from NeSI
Wellington OIDC Server</em>.</p>
</section>
</section>
<section id="run-the-nesi-setup-script-once-per-machine">
<h2>Run the NeSI setup script (once per machine)<a class="headerlink" href="#run-the-nesi-setup-script-once-per-machine" title="Link to this heading">¶</a></h2>
<p>Running the NeSI setup script with no arguments (<code class="code docutils literal notranslate"><span class="pre">rjm_config</span></code>) will
do the following:</p>
<ul class="simple">
<li><p>configure and start a &quot;funcX endpoint&quot; on NeSI, which RJM will use to execute
commands on NeSI</p></li>
<li><p>setup a periodic task (via scrontab) to check that the funcX endpoint is
running and restart it if it has stopped</p></li>
<li><p>create a &quot;Globus Guest Collection&quot; in your NeSI nobackup directory, which will
be used to transfer files to and from NeSI</p></li>
<li><p>write configutation values from the above steps into the RJM config file on
your local machine</p></li>
<li><p>obtain the required authentication tokens so that you can start using RJM
(tokens are cached on the local machine so you should not need to
reauthenticate on the same machine)</p></li>
</ul>
<p>When you run the setup script you will need to input values and authenticate
multiple times, which can't be avoided at this time unfortunately. In some cases
a browser window will open where you will need to do the authentication, in other
cases you will enter details directly at the terminal. You will
need to authenticate with NeSI (first and sector factor) and with Globus, which
can usually be done using your institutional credentials, e.g. University of
Auckland.</p>
<p><strong>Note:</strong> you only need to run this script once per machine.</p>
</section>
<section id="run-a-simple-test">
<h2>Run a simple test<a class="headerlink" href="#run-a-simple-test" title="Link to this heading">¶</a></h2>
<section id="health-check-script">
<h3>Health check script<a class="headerlink" href="#health-check-script" title="Link to this heading">¶</a></h3>
<p>The health check script tests that basic functionality is working by uploading
a file to NeSI and executing a simple command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rjm_health_check
</pre></div>
</div>
<p>If should exit successfully with no errors if things are working.</p>
</section>
<section id="example-simulation">
<h3>Example simulation<a class="headerlink" href="#example-simulation" title="Link to this heading">¶</a></h3>
<p>Clone the repository and run the example simulation using the steps below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/chrisdjscott/RemoteJobManager.git
<span class="nb">cd</span><span class="w"> </span>RemoteJobManager/examples/nonmem
rjm_batch_submit<span class="w"> </span>-f<span class="w"> </span>localdirs.txt<span class="w"> </span>-ll<span class="w"> </span>info
rjm_batch_wait<span class="w"> </span>-f<span class="w"> </span>localdirs.txt<span class="w"> </span>-ll<span class="w"> </span>info
</pre></div>
</div>
<p><strong>Note:</strong> for the above to work you need to either make sure the RJM executables
are in your PATH or provide the full path to them.</p>
<p>If the above worked there should be a file created at <em>files/output.zip</em>.</p>
<p>You should also notice the file <em>files/remote_job.json</em>. This file records the
progress of the remote job. If you try to run a simulation again in the same
directory, RJM should detect that it already ran before and won't repeat the
same steps again. You can override this behaviour by passing the <code class="code docutils literal notranslate"><span class="pre">--force</span></code>
option to <code class="code docutils literal notranslate"><span class="pre">rjm_batch_submit</span></code> or delete the <em>remote_job.json</em> file.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">RemoteJobManager</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started on NeSI</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line_interface.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting_on_nesi.html">Troubleshooting on NeSI</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to RemoteJobManager's documentation!</a></li>
      <li>Next: <a href="command_line_interface.html" title="next chapter">Command line interface</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, The University of Auckland.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.0.2</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/getting_started_nesi.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>